{"version":3,"sources":["components/PostItem/PostItem.module.css","components/Header/Header.module.css","components/Posts/Post.module.css","components/NewPost/NewPost.module.css","components/Footer/Footer.module.css","pages/AuthenticationPage/AuthenticationPage.module.css","components/LikeButton/LikeButton.module.css","pages/HomePage/HomePage.module.css","pages/PostPage/PostPage.module.css","assets/instagram-text.png","assets/comment.svg","components/NewComment/NewComment.module.css","pages/NewPostPage/NewPostPage.module.css","assets/home.svg","assets/search-filled.svg","assets/like-filled.svg","assets/like.svg","components/Posts/Posts.module.css","assets/add.svg","components/Firebase/index.js","components/Header/Header.js","hooks/useFirestore.js","components/LikeButton/index.js","components/LikeButton/LikeButton.js","hooks/useRouter.js","components/Posts/Post.js","components/Posts/index.js","components/Posts/Posts.js","components/Footer/Footer.js","components/Footer/index.js","pages/HomePage/index.js","pages/HomePage/HomePage.js","pages/AuthenticationPage/AuthenticationPage.js","hooks/useFirestoreID.js","components/NewComment/index.js","components/NewComment/NewComment.js","components/PostItem/PostItem.js","pages/PostPage/PostPage.js","components/Header/index.js","components/NewPost/index.js","components/NewPost/NewPost.js","pages/NewPostPage/index.js","pages/NewPostPage/NewPostPage.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","firebase","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","firestore","storage","FieldValue","serverTimestamp","Header","user","currentUser","photoURL","history","useHistory","useState","dropdown","setDropdown","useEffect","handleClickOutside","event","target","matches","handleLogOut","document","addEventListener","removeEventListener","handleHomeClick","push","signOut","catch","error","console","log","className","styles","onClick","alt","src","logo","search","type","placeholder","home","id","disabled","useFirestore","collection","posts","setPosts","unsub","orderBy","onSnapshot","snapshot","documents","forEach","doc","data","LikeButton","likedBy","uid","displayName","ref","liked","setLiked","filter","liker","length","handleLike","a","updatedLikedBy","userImage","createdAt","Date","update","handleRemoveLike","FilledLikeIcon","LikeIcon","useRouter","params","useParams","location","useLocation","match","useRouteMatch","useMemo","replace","pathname","query","queryString","parse","Image","caption","url","Video","autoPlay","loop","Post","seconds","post","router","test","formatDistanceToNow","fromUnixTime","e","CommentIcon","Posts","map","key","Footer","href","rel","HomePage","add","AuthenticationPage","provider","GoogleAuthProvider","signInWithPopup","window","alert","useFirestoreID","setPost","setError","err","NewComment","comment","setComment","handlePostComment","get","then","currentComments","comments","newComment","getElementById","value","onChange","trim","PostItem","shortFormatTimeStamp","date","now","dayDifference","differenceInDays","hourDifference","differenceInHours","minuteDifference","differenceInMinutes","secondDifference","differenceInSeconds","indexOf","focus","formatTimestamp","PostPage","NewPost","file","setFile","setCaption","types","onSubmit","preventDefault","includes","folderName","fileType","getFolderName","storageRef","name","firestoreRef","uploadTask","put","on","progress","bytesTransferred","totalBytes","getDownloadURL","autoComplete","files","NewPostPage","App","isSignedIn","setIsSignedIn","onAuthStateChanged","exact","path","children","Boolean","hostname","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.8a452b7d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main-container\":\"PostItem_main-container__3zLUK\",\"media\":\"PostItem_media__Hz1Wj\",\"post-details\":\"PostItem_post-details__3Sm5i\",\"header-border\":\"PostItem_header-border__gQjA2\",\"header\":\"PostItem_header__2BUo_\",\"caption\":\"PostItem_caption__31_GV\",\"comments\":\"PostItem_comments__ih549\",\"post-details-footer\":\"PostItem_post-details-footer__UdKG8\",\"action-bar\":\"PostItem_action-bar__29lFT\",\"post-details-footer-date\":\"PostItem_post-details-footer-date__fQDEy\",\"comment\":\"PostItem_comment__Rxfqu\",\"body\":\"PostItem_body__2tu8R\",\"user-image\":\"PostItem_user-image__dNkqL\",\"user-name\":\"PostItem_user-name__iBz2T\",\"text\":\"PostItem_text__JetTB\",\"footer\":\"PostItem_footer__gK2t0\",\"date\":\"PostItem_date__3VJek\",\"comment-button\":\"PostItem_comment-button__YBrnI\",\"icon\":\"PostItem_icon__Cqb2F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1VCKf\",\"wrapper\":\"Header_wrapper__4Axjt\",\"logo-button\":\"Header_logo-button__2v2NV\",\"logo\":\"Header_logo__3_SJs\",\"right\":\"Header_right__XlGVu\",\"center\":\"Header_center__2-LpE\",\"search\":\"Header_search__ckDys\",\"input\":\"Header_input__1s5iR\",\"button\":\"Header_button__3kSo_\",\"icon\":\"Header_icon__2vvCF\",\"avatar-button\":\"Header_avatar-button__3ecjQ\",\"avatar\":\"Header_avatar__2DnQ9\",\"dropdown\":\"Header_dropdown__1L4vp\",\"dropdown-item\":\"Header_dropdown-item__pzPF4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"post\":\"Post_post__3eRi_\",\"media\":\"Post_media__1MKAJ\",\"post-details\":\"Post_post-details__sRYCO\",\"user-image\":\"Post_user-image__1j0ao\",\"details\":\"Post_details__3dKFz\",\"uploader-name\":\"Post_uploader-name__1chH1\",\"time-posted\":\"Post_time-posted__3lvXY\",\"actions\":\"Post_actions__3oRHE\",\"comment-button\":\"Post_comment-button__1J3B4\",\"icon\":\"Post_icon__28Dh6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"NewPost_container__2xhWH\",\"form\":\"NewPost_form__v0txG\",\"header\":\"NewPost_header__mor6s\",\"title\":\"NewPost_title__3SwKb\",\"inputs\":\"NewPost_inputs__1vZk5\",\"caption\":\"NewPost_caption__3HDPv\",\"file\":\"NewPost_file__mggh4\",\"share\":\"NewPost_share__3TEzw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__1w0lV\",\"links\":\"Footer_links__2pI3S\",\"link\":\"Footer_link__Xabb2\",\"copyright\":\"Footer_copyright__2OWH4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AuthenticationPage_container__2lzXg\",\"wrapper\":\"AuthenticationPage_wrapper__3U2IL\",\"form\":\"AuthenticationPage_form__1VSEV\",\"logo\":\"AuthenticationPage_logo__2_Oix\",\"button\":\"AuthenticationPage_button__1Gudi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"like-button\":\"LikeButton_like-button__1YtNj\",\"icon\":\"LikeButton_icon__3-Hmh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HomePage_container__13Sqf\",\"posts\":\"HomePage_posts__LW7Ow\",\"add-button\":\"HomePage_add-button__V1liL\",\"icon\":\"HomePage_icon__28mA-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PostPage_container__1rp6X\",\"post\":\"PostPage_post__dPWE5\"};","module.exports = __webpack_public_path__ + \"static/media/instagram-text.8b2206ad.png\";","module.exports = __webpack_public_path__ + \"static/media/comment.2bf9666a.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"NewComment_container__17Brb\",\"input\":\"NewComment_input__pzyUy\",\"button\":\"NewComment_button__3VMog\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"NewPostPage_container__1p9Ve\",\"new-post\":\"NewPostPage_new-post__180F8\"};","module.exports = __webpack_public_path__ + \"static/media/home.53342693.svg\";","module.exports = __webpack_public_path__ + \"static/media/search-filled.264ed428.svg\";","module.exports = __webpack_public_path__ + \"static/media/like-filled.e39a07e6.svg\";","module.exports = __webpack_public_path__ + \"static/media/like.2da23ddc.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"posts\":\"Posts_posts__HBDHm\"};","module.exports = __webpack_public_path__ + \"static/media/add.6b59e31f.svg\";","import * as firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport \"firebase/storage\";\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_APP_ID,\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nexport default firebase;\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\nexport const storage = firebase.storage();\nexport const timestamp = firebase.firestore.FieldValue.serverTimestamp;\n","import React, { useEffect, useState } from \"react\";\nimport styles from \"./Header.module.css\";\nimport logo from \"../../assets/instagram-text.png\";\nimport home from \"../../assets/home.svg\";\nimport { auth } from \"../Firebase\";\nimport search from \"../../assets/search-filled.svg\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function Header() {\n  let user = {};\n  if (auth.currentUser) user = auth.currentUser;\n  const { photoURL } = user;\n  let history = useHistory();\n  const [dropdown, setDropdown] = useState(false);\n\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (event.target.matches(\"#logout\")) {\n        handleLogOut();\n      } else if (!event.target.matches(\"#avatar\")) {\n        setDropdown(false);\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, []);\n\n  const handleHomeClick = () => {\n    history.push(\"/\");\n  };\n\n  const handleAvatarClick = () => {\n    setDropdown(true);\n  };\n\n  const handleLogOut = () => {\n    auth.signOut().catch((error) => console.log(error));\n  };\n\n  return (\n    <div className={styles[\"header\"]}>\n      <div className={styles[\"wrapper\"]}>\n        <div className={styles[\"left\"]}>\n          <button onClick={handleHomeClick} className={styles[\"logo-button\"]}>\n            <img className={styles[\"logo\"]} alt=\"logo\" src={logo} />\n          </button>\n        </div>\n        <div className={styles[\"center\"]}>\n          <img className={styles[\"search\"]} alt=\"search\" src={search} />\n          <input className={styles[\"input\"]} type=\"text\" placeholder=\"Search\" />\n        </div>\n        <div className={styles[\"right\"]}>\n          <button onClick={handleHomeClick} className={styles[\"button\"]}>\n            <img className={styles[\"icon\"]} alt=\"home\" src={home} />\n          </button>\n          <button\n            onClick={handleAvatarClick}\n            className={styles[\"avatar-button\"]}\n          >\n            <img\n              id=\"avatar\"\n              className={styles[\"avatar\"]}\n              alt=\"user\"\n              src={photoURL}\n            />\n          </button>\n          {dropdown && (\n            <div className={styles[\"dropdown\"]}>\n              <button disabled className={styles[\"dropdown-item\"]}>\n                Profile\n              </button>\n              <button disabled className={styles[\"dropdown-item\"]}>\n                Settings\n              </button>\n              <button\n                onClick={handleLogOut}\n                className={styles[\"dropdown-item\"]}\n                id=\"logout\"\n              >\n                Log Out\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { firestore } from \"../components/Firebase\";\n\nconst useFirestore = (collection) => {\n  const [posts, setPosts] = useState([]);\n\n  useEffect(() => {\n    const unsub = firestore\n      .collection(collection)\n      .orderBy(\"createdAt\", \"desc\")\n      .onSnapshot((snapshot) => {\n        let documents = [];\n        snapshot.forEach((doc) => {\n          documents.push({ ...doc.data(), id: doc.id });\n        });\n        setPosts(documents);\n      });\n\n    return () => unsub();\n  }, [collection]);\n\n  return { posts };\n};\n\nexport default useFirestore;\n","import LikeButton from \"./LikeButton\";\n\nexport default LikeButton;\n","import React, { useEffect, useState } from \"react\";\nimport { auth, firestore } from \"../Firebase\";\nimport styles from \"./LikeButton.module.css\";\nimport FilledLikeIcon from \"../../assets/like-filled.svg\";\nimport LikeIcon from \"../../assets/like.svg\";\n\nexport default function LikeButton({ id, likedBy }) {\n  let user = {};\n  if (auth.currentUser) user = auth.currentUser;\n  const { uid, displayName, photoURL } = user;\n  const ref = firestore.collection(\"posts\").doc(id);\n  const [liked, setLiked] = useState(false);\n\n  useEffect(() => {\n    const userAlreadyLiked = likedBy.filter((liker) => {\n      return liker.uid === uid;\n    });\n    if (userAlreadyLiked.length > 0) {\n      setLiked(true);\n    } else {\n      setLiked(false);\n    }\n  }, [likedBy, uid]);\n\n  const handleLike = async () => {\n    const updatedLikedBy = [\n      ...likedBy,\n      {\n        uid,\n        user: displayName,\n        userImage: photoURL,\n        createdAt: new Date(),\n      },\n    ];\n\n    await ref.update({ likedBy: updatedLikedBy });\n  };\n\n  const handleRemoveLike = async () => {\n    const updatedLikedBy = likedBy.filter((liker) => {\n      return liker.uid !== uid;\n    });\n\n    await ref.update({ likedBy: updatedLikedBy });\n  };\n\n  return (\n    <div>\n      {liked && (\n        <button className={styles[\"like-button\"]} onClick={handleRemoveLike}>\n          <img className={styles[\"icon\"]} alt=\"Like\" src={FilledLikeIcon} />\n        </button>\n      )}\n      {!liked && (\n        <button className={styles[\"like-button\"]} onClick={handleLike}>\n          <img className={styles[\"icon\"]} alt=\"Like\" src={LikeIcon} />\n        </button>\n      )}\n    </div>\n  );\n}\n","import { useMemo } from \"react\";\nimport {\n  useParams,\n  useLocation,\n  useHistory,\n  useRouteMatch,\n} from \"react-router-dom\";\nimport queryString from \"query-string\";\n\nfunction useRouter() {\n  const params = useParams();\n  const location = useLocation();\n  const history = useHistory();\n  const match = useRouteMatch();\n\n  return useMemo(() => {\n    return {\n      push: history.push,\n      replace: history.replace,\n      pathname: location.pathname,\n      query: {\n        ...queryString.parse(location.search), // Convert string to object\n        ...params,\n      },\n      match,\n      location,\n      history,\n    };\n  }, [params, match, location, history]);\n}\n\nexport default useRouter;\n","import React from \"react\";\nimport LikeButton from \"../LikeButton\";\nimport styles from \"./Post.module.css\";\nimport { fromUnixTime, formatDistanceToNow } from \"date-fns\";\nimport CommentIcon from \"../../assets/comment.svg\";\nimport useRouter from \"../../hooks/useRouter\";\n\nfunction Image({ caption, url }) {\n  return <img className={styles[\"media\"]} alt={caption} src={url}></img>;\n}\n\nfunction Video({ url, type }) {\n  return (\n    <video className={styles[\"media\"]} autoPlay loop>\n      <source src={url} type={type} />\n    </video>\n  );\n}\n\nexport default function Post({ post }) {\n  const { caption, createdAt, id, url, user, userImage, type, likedBy } = post;\n  const router = useRouter();\n\n  const formatTimestamp = (seconds) => {\n    return formatDistanceToNow(fromUnixTime(seconds), new Date());\n  };\n\n  return (\n    <div className={styles[\"post\"]}>\n      {/image/g.test(type) && <Image caption={caption} url={url} />}\n      {/video/g.test(type) && <Video url={url} type={type} />}\n      <div className={styles[\"post-details\"]}>\n        <img className={styles[\"user-image\"]} alt={user} src={userImage} />\n        <div className={styles[\"details\"]}>\n          <p className={styles[\"uploader-name\"]}>{user}</p>\n          <p className={styles[\"time-posted\"]}>\n            {`${formatTimestamp(createdAt.seconds)} ago`}\n          </p>\n        </div>\n        <div className={styles[\"actions\"]}>\n          <LikeButton\n            className={styles[\"like-button\"]}\n            id={id}\n            likedBy={likedBy}\n          />\n          <div>\n            <button\n              className={styles[\"comment-button\"]}\n              onClick={(e) => router.push(`/post/${id}`)}\n            >\n              <img className={styles[\"icon\"]} alt=\"Comment\" src={CommentIcon} />\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import Posts from \"./Posts\";\n\nexport default Posts;\n","import React from \"react\";\nimport useFirestore from \"../../hooks/useFirestore\";\nimport Post from \"./Post\";\nimport styles from \"./Posts.module.css\";\n\nexport default function Posts() {\n  const { posts } = useFirestore(\"posts\");\n\n  return (\n    <div className={styles.posts}>\n      {posts && posts.map((post) => <Post key={post.id} post={post} />)}\n    </div>\n  );\n}\n","import React from \"react\";\nimport styles from \"./Footer.module.css\";\n\nexport default function Footer() {\n  return (\n    <div className={styles[\"footer\"]}>\n      <div className={styles[\"links\"]}>\n        <a className={styles[\"link\"]} href=\"#\">\n          About\n        </a>\n        <a\n          className={styles[\"link\"]}\n          href=\"https://github.com/amielfilarca/instagram-clone\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Github\n        </a>\n      </div>\n      <div className={styles[\"copyright\"]}>\n        © 2020 Instagram Clone by Amiel Filarca\n      </div>\n    </div>\n  );\n}\n","import Footer from \"./Footer\";\n\nexport default Footer;\n","import HomePage from \"./HomePage\";\n\nexport default HomePage;\n","import React from \"react\";\nimport Header from \"../../components/Header/Header\";\nimport Posts from \"../../components/Posts\";\nimport styles from \"./HomePage.module.css\";\nimport add from \"../../assets/add.svg\";\nimport { useHistory } from \"react-router-dom\";\nimport Footer from \"../../components/Footer\";\n\nexport default function HomePage() {\n  let history = useHistory();\n\n  const handleAddButtonClick = () => {\n    history.push(\"/new-post\");\n  };\n\n  return (\n    <div className={styles[\"container\"]}>\n      <Header />\n      <div className={styles[\"posts\"]}>\n        <Posts />\n      </div>\n      <button onClick={handleAddButtonClick} className={styles[\"add-button\"]}>\n        <img className={styles[\"icon\"]} alt=\"add\" src={add} />\n      </button>\n      <Footer />\n    </div>\n  );\n}\n","import React from \"react\";\nimport firebase, { auth } from \"../../components/Firebase\";\nimport logo from \"../../assets/instagram-text.png\";\nimport styles from \"./AuthenticationPage.module.css\";\nimport Footer from \"../../components/Footer/Footer\";\n\nexport default function AuthenticationPage() {\n  const handleSignIn = () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    auth.signInWithPopup(provider).catch((error) => window.alert(error));\n  };\n\n  return (\n    <div className={styles[\"container\"]}>\n      <div className={styles[\"wrapper\"]}>\n        <div className={styles[\"form\"]}>\n          <img className={styles[\"logo\"]} alt=\"logo\" src={logo} />\n          <button className={styles[\"button\"]} onClick={handleSignIn}>\n            Sign in with Google\n          </button>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { firestore } from \"../components/Firebase\";\n\nconst useFirestoreID = (id) => {\n  const [post, setPost] = useState([]);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const ref = firestore.collection(\"posts\").doc(id);\n    const unsub = ref.onSnapshot(\n      (snapshot) => {\n        const data = snapshot.data();\n        if (data) setPost(data);\n      },\n      (err) => {\n        setError(err);\n      }\n    );\n    return () => unsub();\n  }, [id]);\n\n  return { post, error };\n};\n\nexport default useFirestoreID;\n","import NewComment from \"./NewComment\";\n\nexport default NewComment;\n","import React, { useState } from \"react\";\nimport { auth, firestore } from \"../Firebase\";\nimport styles from \"./NewComment.module.css\";\n\nexport default function NewComment({ id }) {\n  const [comment, setComment] = useState(null);\n  const ref = firestore.collection(\"posts\").doc(id);\n\n  if (auth.currentUser) {\n    const { uid, displayName, photoURL } = auth.currentUser;\n\n    const handleCommentChange = (event) => {\n      setComment(event.target.value);\n    };\n\n    const handlePostComment = async () => {\n      await ref\n        .get()\n        .then(async function (doc) {\n          const createdAt = new Date();\n          const currentComments = doc.data().comments;\n          const newComment = {\n            comment,\n            uid,\n            user: displayName,\n            userImage: photoURL,\n            createdAt,\n          };\n          let comments = {};\n          if (currentComments) {\n            comments = [...currentComments, newComment];\n          } else {\n            comments = [newComment];\n          }\n          await ref.update({\n            comments,\n          });\n          setComment(null);\n          document.getElementById(\"comment-input\").value = null;\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    };\n    return (\n      <div className={styles[\"container\"]}>\n        <input\n          id=\"comment-input\"\n          className={styles[\"input\"]}\n          onChange={handleCommentChange}\n          type=\"text\"\n          placeholder=\"Add a comment...\"\n        />\n        <button\n          disabled={comment === null || comment.trim() === \"\"}\n          className={styles[\"button\"]}\n          onClick={handlePostComment}\n        >\n          Post\n        </button>\n      </div>\n    );\n  } else {\n    return <div></div>;\n  }\n}\n","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport useFirestoreID from \"../../hooks/useFirestoreID\";\nimport NewComment from \"../NewComment\";\nimport styles from \"./PostItem.module.css\";\nimport {\n  fromUnixTime,\n  formatDistanceToNow,\n  differenceInHours,\n  differenceInMinutes,\n  differenceInDays,\n  differenceInSeconds,\n} from \"date-fns\";\nimport LikeButton from \"../LikeButton\";\nimport CommentIcon from \"../../assets/comment.svg\";\n\nfunction Image({ caption, url }) {\n  return <img className={styles[\"media\"]} alt={caption} src={url}></img>;\n}\n\nfunction Video({ url, type }) {\n  return (\n    <video className={styles[\"media\"]} autoPlay loop>\n      <source src={url} type={type} />\n    </video>\n  );\n}\n\nexport default function PostItem() {\n  const { id } = useParams();\n  const { post } = useFirestoreID(id);\n\n  const formatTimestamp = (seconds) => {\n    const date = fromUnixTime(seconds);\n    const now = new Date();\n    return `${formatDistanceToNow(date, now)} ago`;\n  };\n\n  const shortFormatTimeStamp = (seconds) => {\n    const date = fromUnixTime(seconds);\n    const now = new Date();\n    const dayDifference = differenceInDays(now, date);\n\n    if (dayDifference < 1) {\n      const hourDifference = differenceInHours(now, date);\n      if (hourDifference < 1) {\n        const minuteDifference = differenceInMinutes(now, date);\n        if (minuteDifference < 1) {\n          const secondDifference = differenceInSeconds(now, date);\n          if (secondDifference < 1) {\n            return \"just now\";\n          } else {\n            return `${secondDifference}s`;\n          }\n        } else {\n          return `${minuteDifference}m`;\n        }\n      } else {\n        return `${hourDifference}h`;\n      }\n    } else {\n      return `${dayDifference}d`;\n    }\n  };\n\n  if (post && post.length !== 0) {\n    const {\n      caption,\n      createdAt,\n      url,\n      user,\n      userImage,\n      type,\n      comments,\n      likedBy,\n    } = post;\n\n    return (\n      <div className={styles[\"main-container\"]}>\n        <div className={styles[\"post-media\"]}>\n          {/image/g.test(type) && <Image caption={caption} url={url} />}\n          {/video/g.test(type) && <Video url={url} type={type} />}\n        </div>\n        <div className={styles[\"post-details\"]}>\n          <div className={styles[\"header-border\"]}>\n            <div className={styles[\"header\"]}>\n              <img\n                className={styles[\"user-image\"]}\n                alt={user}\n                src={userImage}\n              />\n              <div className={styles[\"body\"]}>\n                <p className={styles[\"user-name\"]}>{user}</p>\n              </div>\n            </div>\n          </div>\n\n          <div className={styles[\"comments\"]}>\n            {caption && (\n              <div className={styles[\"caption\"]}>\n                <img\n                  className={styles[\"user-image\"]}\n                  alt={user}\n                  src={userImage}\n                />\n                <div className={styles[\"body\"]}>\n                  <div>\n                    <p className={styles[\"user-name\"]}>{user}</p>\n                    <span className={styles[\"text\"]}>{caption}</span>\n                  </div>\n                  <div className={styles[\"footer\"]}>\n                    <p className={styles[\"date\"]}>\n                      {shortFormatTimeStamp(createdAt.seconds)}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {comments &&\n              comments.map((comment) => (\n                <div\n                  className={styles[\"comment\"]}\n                  key={comments.indexOf(comment)}\n                >\n                  <img\n                    className={styles[\"user-image\"]}\n                    alt={comment.user}\n                    src={comment.userImage}\n                  />\n                  <div className={styles[\"body\"]}>\n                    <div>\n                      <p className={styles[\"user-name\"]}>{comment.user}</p>\n                      <span className={styles[\"text\"]}>{comment.comment}</span>\n                    </div>\n                    <div className={styles[\"footer\"]}>\n                      <p className={styles[\"date\"]}>\n                        {shortFormatTimeStamp(comment.createdAt.seconds)}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              ))}\n          </div>\n\n          <div className={styles[\"post-details-footer\"]}>\n            <div className={styles[\"action-bar\"]}>\n              <LikeButton id={id} likedBy={likedBy} />\n              <button\n                onClick={() => {\n                  const commentInput = document.getElementById(\"comment-input\");\n                  commentInput.focus();\n                }}\n                className={styles[\"comment-button\"]}\n              >\n                <img\n                  className={styles[\"icon\"]}\n                  alt=\"Comment\"\n                  src={CommentIcon}\n                />\n              </button>\n            </div>\n            {createdAt && (\n              <p className={styles[\"post-details-footer-date\"]}>\n                {formatTimestamp(createdAt.seconds)}\n              </p>\n            )}\n            <NewComment id={id} />\n          </div>\n        </div>\n      </div>\n    );\n  } else {\n    return (\n      <div>\n        <h1>Post not found.</h1>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport Footer from \"../../components/Footer/Footer\";\nimport Header from \"../../components/Header/Header\";\nimport PostItem from \"../../components/PostItem/PostItem\";\nimport styles from \"./PostPage.module.css\";\n\nexport default function PostPage() {\n  return (\n    <div className={styles[\"container\"]}>\n      <div className={styles[\"header\"]}>\n        <Header />\n      </div>\n      <div className={styles[\"post\"]}>\n        <PostItem />\n      </div>\n      <div className={styles[\"footer\"]}>\n        <Footer />\n      </div>\n    </div>\n  );\n}\n","import Header from \"./Header\";\n\nexport default Header;\n","import NewPost from \"./NewPost\";\n\nexport default NewPost;\n","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { auth, firestore, storage } from \"../Firebase\";\nimport styles from \"./NewPost.module.css\";\n\nexport default function NewPost() {\n  const [file, setFile] = useState(null);\n  const [caption, setCaption] = useState(null);\n  const [error, setError] = useState(null);\n\n  let history = useHistory();\n\n  const types = [\n    \"image/jpeg\",\n    \"image/png\",\n    \"video/mp4\",\n    \"video/webm\",\n    \"video/ogg\",\n  ];\n\n  const getFolderName = (fileType) => {\n    switch (fileType) {\n      case \"image/jpeg\":\n        return \"images\";\n      case \"image/png\":\n        return \"images\";\n      case \"video/mp4\":\n        return \"videos\";\n      case \"video/webm\":\n        return \"videos\";\n      case \"video/ogg\":\n        return \"videos\";\n      default:\n        break;\n    }\n  };\n\n  const handleFileChange = (event) => {\n    if (types.includes(event.target.files[0].type)) {\n      setError(null);\n      setFile(event.target.files[0]);\n    } else {\n      setError(\n        \"Invalid file: Please select an image (jpeg/png) or a video (mp4/webm/ogg).\"\n      );\n    }\n  };\n\n  const handleCaptionChange = (event) => {\n    const caption = event.target.value;\n    if (caption && caption.trim !== \"\") {\n      setCaption(event.target.value);\n    } else {\n      setCaption(null);\n    }\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    if (file && types.includes(file.type)) {\n      const folderName = getFolderName(file.type);\n      const storageRef = storage.ref(folderName + \"/\" + file.name);\n      const firestoreRef = firestore.collection(\"posts\");\n      const uploadTask = storageRef.put(file);\n      uploadTask.on(\n        \"state_changed\",\n        function (snapshot) {\n          const progress =\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n          console.log(\"Upload is \" + progress + \"% done\");\n        },\n        function (error) {\n          console.log(error);\n        },\n        async function () {\n          const createdAt = new Date();\n          const { uid, displayName, photoURL } = auth.currentUser;\n          await uploadTask.snapshot.ref.getDownloadURL().then(function (url) {\n            firestoreRef.add({\n              url,\n              caption,\n              createdAt,\n              uid,\n              user: displayName,\n              userImage: photoURL,\n              type: file.type,\n              comments: [],\n              likedBy: [],\n            });\n          });\n          history.push(\"/\");\n        }\n      );\n    }\n  };\n\n  return (\n    <div className={styles[\"container\"]}>\n      <form\n        className={styles[\"form\"]}\n        onSubmit={handleSubmit}\n        autoComplete=\"off\"\n      >\n        <div className={styles[\"header\"]}>\n          <h1 className={styles[\"title\"]}>New Post</h1>\n        </div>\n        <div className={styles[\"inputs\"]}>\n          <input\n            className={styles[\"caption\"]}\n            onChange={handleCaptionChange}\n            type=\"text\"\n            id=\"caption\"\n            placeholder=\"Write a caption...\"\n          />\n          <input\n            className={styles[\"file\"]}\n            onChange={handleFileChange}\n            type=\"file\"\n            id=\"file\"\n          />\n        </div>\n        <input\n          className={styles[\"share\"]}\n          type=\"submit\"\n          value=\"Share\"\n          disabled={error}\n        />\n      </form>\n      {error && <h3>{error}</h3>}\n    </div>\n  );\n}\n","import NewPostPage from \"./NewPostPage\";\n\nexport default NewPostPage;\n","import React from \"react\";\nimport Header from \"../../components/Header\";\nimport NewPost from \"../../components/NewPost\";\nimport Footer from \"../../components/Footer\";\nimport styles from \"./NewPostPage.module.css\";\n\nexport default function NewPostPage() {\n  return (\n    <div className={styles[\"container\"]}>\n      <div>\n        <Header />\n      </div>\n      <div className={styles[\"new-post\"]}>\n        <NewPost />\n      </div>\n      <div>\n        <Footer />\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { auth } from \"./components/Firebase\";\nimport HomePage from \"./pages/HomePage\";\nimport { Switch, Route } from \"react-router-dom\";\nimport AuthenticationPage from \"./pages/AuthenticationPage/AuthenticationPage\";\nimport PostPage from \"./pages/PostPage/PostPage\";\nimport NewPostPage from \"./pages/NewPostPage\";\n\nfunction App() {\n  const [isSignedIn, setIsSignedIn] = useState(false);\n\n  const unsub = auth.onAuthStateChanged(\n    function (user) {\n      if (user) {\n        setIsSignedIn(true);\n      } else {\n        setIsSignedIn(false);\n      }\n      return () => unsub();\n    },\n    function (error) {\n      console.log(error);\n    }\n  );\n\n  return (\n    <div>\n      <Switch>\n        <Route exact path=\"/\">\n          {!isSignedIn && <AuthenticationPage />}\n          {isSignedIn && <HomePage />}\n        </Route>\n        <Route path=\"/post/:id\" children={<PostPage />} />\n        <Route path=\"/new-post\" children={<NewPostPage />} />\n        <Route path=\"*\">\n          <h1>404: Page not found</h1>\n        </Route>\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { HashRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}